!(function (e, n) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = n())
    : 'function' == typeof define && define.amd
      ? define(n)
      : ((e = e || self).uni = n());
})(this, function () {
  'use strict';
  function e(e, n) {
    return a.call(e, n);
  }
  function n() {
    return window.__dcloud_weex_postMessage || window.__dcloud_weex_;
  }
  function i() {
    return window.__uniapp_x_postMessage || window.__uniapp_x_;
  }
  try {
    var t = {};
    (Object.defineProperty(t, 'passive', { get: function () {} }),
      window.addEventListener('test-passive', null, t));
  } catch (t) {}
  for (
    var o,
      a = Object.prototype.hasOwnProperty,
      r = [],
      d = function (e, t) {
        var o = { options: { timestamp: +new Date() }, name: e, arg: t };
        if (i()) {
          if ('postMessage' === e) {
            var a = { data: t };
            return window.__uniapp_x_postMessage
              ? window.__uniapp_x_postMessage(a)
              : window.__uniapp_x_.postMessage(JSON.stringify(a));
          }
          var d = { type: 'WEB_INVOKE_APPSERVICE', args: { data: o, webviewIds: r } };
          window.__uniapp_x_postMessage
            ? window.__uniapp_x_postMessageToService(d)
            : window.__uniapp_x_.postMessageToService(JSON.stringify(d));
        } else if (n()) {
          if ('postMessage' === e) {
            var s = { data: [t] };
            return window.__dcloud_weex_postMessage
              ? window.__dcloud_weex_postMessage(s)
              : window.__dcloud_weex_.postMessage(JSON.stringify(s));
          }
          var w = { type: 'WEB_INVOKE_APPSERVICE', args: { data: o, webviewIds: r } };
          window.__dcloud_weex_postMessage
            ? window.__dcloud_weex_postMessageToService(w)
            : window.__dcloud_weex_.postMessageToService(JSON.stringify(w));
        } else {
          if (!window.plus)
            return window.parent.postMessage(
              { type: 'WEB_INVOKE_APPSERVICE', data: o, pageId: '' },
              '*',
            );
          if (0 === r.length) {
            var u = plus.webview.currentWebview();
            if (!u) throw new Error('plus.webview.currentWebview() is undefined');
            var g = u.parent(),
              c = '';
            ((c = g ? g.id : u.id), r.push(c));
          }
          if (plus.webview.getWebviewById('__uniapp__service'))
            plus.webview.postMessageToUniNView(
              { type: 'WEB_INVOKE_APPSERVICE', args: { data: o, webviewIds: r } },
              '__uniapp__service',
            );
          else {
            var v = JSON.stringify(o);
            plus.webview
              .getLaunchWebview()
              .evalJS(
                'UniPlusBridge.subscribeHandler("'
                  .concat('WEB_INVOKE_APPSERVICE', '",')
                  .concat(v, ',')
                  .concat(JSON.stringify(r), ');'),
              );
          }
        }
      },
      s = {
        navigateTo: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = e.url;
          d('navigateTo', { url: encodeURI(n) });
        },
        navigateBack: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = e.delta;
          d('navigateBack', { delta: parseInt(n) || 1 });
        },
        switchTab: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = e.url;
          d('switchTab', { url: encodeURI(n) });
        },
        reLaunch: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = e.url;
          d('reLaunch', { url: encodeURI(n) });
        },
        redirectTo: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = e.url;
          d('redirectTo', { url: encodeURI(n) });
        },
        getEnv: function (e) {
          i()
            ? e({ uvue: !0 })
            : n()
              ? e({ nvue: !0 })
              : window.plus
                ? e({ plus: !0 })
                : e({ h5: !0 });
        },
        postMessage: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          d('postMessage', e.data || {});
        },
      },
      w = /uni-app/i.test(navigator.userAgent),
      u = /Html5Plus/i.test(navigator.userAgent),
      g = /complete|loaded|interactive/,
      c =
        window.my &&
        navigator.userAgent.indexOf(
          ['t', 'n', 'e', 'i', 'l', 'C', 'y', 'a', 'p', 'i', 'l', 'A'].reverse().join(''),
        ) > -1,
      v = window.swan && window.swan.webView && /swan/i.test(navigator.userAgent),
      p =
        window.qq &&
        window.qq.miniProgram &&
        /QQ/i.test(navigator.userAgent) &&
        /miniProgram/i.test(navigator.userAgent),
      _ = window.tt && window.tt.miniProgram && /toutiaomicroapp/i.test(navigator.userAgent),
      m =
        window.wx &&
        window.wx.miniProgram &&
        /micromessenger/i.test(navigator.userAgent) &&
        /miniProgram/i.test(navigator.userAgent),
      f = window.qa && /quickapp/i.test(navigator.userAgent),
      l =
        window.ks &&
        window.ks.miniProgram &&
        /micromessenger/i.test(navigator.userAgent) &&
        /miniProgram/i.test(navigator.userAgent),
      E = window.tt && window.tt.miniProgram && /Lark|Feishu/i.test(navigator.userAgent),
      x = window.jd && window.jd.miniProgram && /jdmp/i.test(navigator.userAgent),
      S = window.xhs && window.xhs.miniProgram && /xhsminiapp/i.test(navigator.userAgent),
      h = function () {
        ((window.UniAppJSBridge = !0),
          document.dispatchEvent(
            new CustomEvent('UniAppJSBridgeReady', { bubbles: !0, cancelable: !0 }),
          ));
      },
      y = [
        function (e) {
          if (w || u)
            return (
              window.__uniapp_x_postMessage ||
              window.__uniapp_x_ ||
              window.__dcloud_weex_postMessage ||
              window.__dcloud_weex_
                ? document.addEventListener('DOMContentLoaded', e)
                : window.plus && g.test(document.readyState)
                  ? setTimeout(e, 0)
                  : document.addEventListener('plusready', e),
              s
            );
        },
        function (e) {
          if (m)
            return (
              window.WeixinJSBridge && window.WeixinJSBridge.invoke
                ? setTimeout(e, 0)
                : document.addEventListener('WeixinJSBridgeReady', e),
              window.wx.miniProgram
            );
        },
        function (e) {
          if (p)
            return (
              window.QQJSBridge && window.QQJSBridge.invoke
                ? setTimeout(e, 0)
                : document.addEventListener('QQJSBridgeReady', e),
              window.qq.miniProgram
            );
        },
        function (e) {
          if (c) {
            document.addEventListener('DOMContentLoaded', e);
            var n = window.my;
            return {
              navigateTo: n.navigateTo,
              navigateBack: n.navigateBack,
              switchTab: n.switchTab,
              reLaunch: n.reLaunch,
              redirectTo: n.redirectTo,
              postMessage: n.postMessage,
              getEnv: n.getEnv,
            };
          }
        },
        function (e) {
          if (v) return (document.addEventListener('DOMContentLoaded', e), window.swan.webView);
        },
        function (e) {
          if (_) return (document.addEventListener('DOMContentLoaded', e), window.tt.miniProgram);
        },
        function (e) {
          if (f) {
            window.QaJSBridge && window.QaJSBridge.invoke
              ? setTimeout(e, 0)
              : document.addEventListener('QaJSBridgeReady', e);
            var n = window.qa;
            return {
              navigateTo: n.navigateTo,
              navigateBack: n.navigateBack,
              switchTab: n.switchTab,
              reLaunch: n.reLaunch,
              redirectTo: n.redirectTo,
              postMessage: n.postMessage,
              getEnv: n.getEnv,
            };
          }
        },
        function (e) {
          if (l)
            return (
              window.WeixinJSBridge && window.WeixinJSBridge.invoke
                ? setTimeout(e, 0)
                : document.addEventListener('WeixinJSBridgeReady', e),
              window.ks.miniProgram
            );
        },
        function (e) {
          if (E) return (document.addEventListener('DOMContentLoaded', e), window.tt.miniProgram);
        },
        function (e) {
          if (x)
            return (
              window.JDJSBridgeReady && window.JDJSBridgeReady.invoke
                ? setTimeout(e, 0)
                : document.addEventListener('JDJSBridgeReady', e),
              window.jd.miniProgram
            );
        },
        function (e) {
          if (S) return window.xhs.miniProgram;
        },
        function (e) {
          return (document.addEventListener('DOMContentLoaded', e), s);
        },
      ],
      M = 0;
    M < y.length && !(o = y[M](h));
    M++
  );
  o || (o = {});
  var P = 'undefined' != typeof uni ? uni : {};
  if (!P.navigateTo) for (var b in o) e(o, b) && (P[b] = o[b]);
  return ((P.webView = o), P);
});
